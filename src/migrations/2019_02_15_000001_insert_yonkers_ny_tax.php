<?php

use Appleton\Taxes\Countries\US\NewYork\Yonkers\Yonkers;
use Appleton\Taxes\Models\TaxArea;
use Illuminate\Database\Migrations\Migration;
use Illuminate\Support\Facades\DB;

return new class extends Migration {
    protected $governmental_unit_areas = 'governmental_unit_areas';
    protected $taxes = 'taxes';
    protected $tax_areas = 'tax_areas';

    /**
     * Run the migrations.
     *
     * @return void
     */
    public function up()
    {
        $yonkers_gua_id = DB::table($this->governmental_unit_areas)->insertGetId([
            'name' => 'Yonkers, NY',
            'area' => '0106000020E6100000010000000103000000010000006D0000005E0CE544BB7A52C0635E471CB27544407F778643BB7A52C0075C5223B2754440C937DBDC987A52C06211C30E6376444019EBA8AB627A52C02CE1EF68BE7744406337FBEB437A52C02D1A8D7F83784440271422E0107A52C0CE1ABCAFCA794440E1731280107A52C077C3E5C8CC7944400D6C4124EA7952C0B5513A48A37A4440FCE0B407887952C0DAAB32E9C77C444098F90E7EE27852C0D0950854FF7C4440B60F79CBD57852C089B5F814007D4440C974E8F4BC7852C060730E9E097D444029232E008D7852C0C5724BAB217D44403E0455A3577852C04DF73AA92F7D4440CF488446B07752C0B9A64066677D44404E95EF19897752C07D91D096737D444099BA2BBB607752C0739CDB847B7D444083C0CAA1457752C01D7233DC807D4440FBC8AD49B77652C0C823B891B27D44409D0E643DB57652C08043A852B37D44404DB857E6AD7652C05648F949B57D444037A79201A07652C0FCFCF7E0B57D4440C84274081C7652C02C29779FE37D4440E76C01A1F57552C02504ABEAE57D44402EFCE07CEA7552C0A94A5B5CE37D44402F8507CDAE7552C050508A56EE7D444097FDBAD39D7552C07747C66AF37D44408925E5EE737552C0C9569753027E444009DD2571567552C05260014C197E44403885950A2A7552C07366BB421F7E444022FAB5F5D37452C0F146E6913F7E4440041DAD6A497452C0D7D9907F667E4440B282DF86187452C0DC7F643A747E444080289831057452C0569DD5027B7E444017B7D100DE7352C0334C6DA9837E4440FDD8243FE27352C077BAF3C4737E44407CD3F4D9017452C00876FC17087E4440B60E0EF6267452C098A59D9ACB7D4440E09EE74F1B7452C0309C6B98A17D444068E90AB6117452C00B7C45B75E7D4440A6B73F170D7452C015AC71361D7D444034677DCA317452C087F8872D3D7C44401F662FDB4E7452C0C24EB16A107C44408CA19C68577452C0F58079C8947B4440F0BDBF417B7452C03E0455A3577B4440EAE923F0877452C09949D40B3E7B4440675F79909E7452C034B91803EB7A44405FCFD72C977452C0FB1C1F2DCE7A4440A5A14621C97452C0E4BB94BA647A44408D62B9A5D57452C0A2B5A2CD717A44400F7BA180ED7452C0DFA7AAD0407A4440594B0169FF7452C09AAE27BA2E7A4440B265F9BA0C7552C04223D8B8FE794440691D554D107552C012F758FAD07944408940F50F227552C005DB8827BB7944408DD2A57F497552C0FC709010E579444068CBB914577552C0C022BF7E887944409DF2E846587552C03F55850662794440F5F23B4D667552C0C55565DF157944407CB43863987552C07EAA0A0DC478444042588D25AC7552C0C878944A7878444092770E65A87552C0F5B86FB54E78444016D86322A57552C0B876A22424784440E42F2DEA937552C0719010E50B7844405C74B2D47A7552C07233DC80CF774440C3D2C08F6A7552C04EEFE2FDB87744405B09DD25717552C0745C8DEC4A774440DDAF027CB77552C0EBAA402D067744400A67B796C97552C0AFB321FFCC7644409D62D520CC7552C01C06F357C8764440A1832EE1D07552C0CDE33098BF76444039B709F7CA7552C0616EF7729F764440FF774485EA7552C05CE674594C764440F33AE2900D7652C07F6B274A427644409DD9AED0077652C012BC218D0A7644401BF16437337652C00853944BE37544403A3E5A9C317652C02A8F6E844575444062F19BC24A7652C08EACFC3218754440C3B81B446B7652C0295C8FC2F57444404580D3BB787652C0DC274701A27444403201BF46927652C0E0D4079277744440313ECC5EB67652C0EB556474407444407FD8D2A3A97652C0287CB60E0E744440EAB12D03CE7652C0A25F5B3FFD7344407DCA3159DC7652C092239D8191734440B0E07EC0037752C0D99596917A7344400CC85EEFFE7652C00DDE57E54273444048179B560A7752C00C76C3B645734440E447FC8A357752C0DF180280637344405C37A5BC567752C08061F9F36D73444078D15790667752C0F816D68D77734440EE3EC7478B7752C007EC6AF29473444035D07CCEDD7752C0D6A71C93C573444053E8BCC62E7852C00B5D8940F57344403EADA23F347852C0B1DD3D40F77344408997A773457852C0999EB0C40374444045460724617852C00E84640113744440346612F5827852C0B151D66F2674444020B6F468AA7852C0954220973874444054E0641BB87852C0A088450C3B744440BF982D59157952C0A04D0E9F74744440D39E9273627952C0AB07CC43A674444039CFD8976C7952C0101E6D1CB1744440A9656B7D917952C0F355F2B1BB744440BDA60705A57952C0F23E8EE6C87444403D096CCEC17952C0A777F17EDC744440069FE6E4457A52C0094FE8F5277544406EF59CF4BE7A52C0E947C329737544405E0CE544BB7A52C0635E471CB2754440'
        ]);

        $yonkers_tax_id = DB::table($this->taxes)->insertGetId([
            'name' => 'Yonkers Tax',
            'class' => Yonkers::class,
        ]);

        $new_york_gua_id = DB::table($this->governmental_unit_areas)
            ->where('name', 'New York')
            ->first()
            ->id;

        DB::table($this->tax_areas)->insert([[
            'tax_id' => $yonkers_tax_id,
            'home_governmental_unit_area_id' => $yonkers_gua_id,
            'work_governmental_unit_area_id' => $new_york_gua_id,
            'based' => TaxArea::BASED_ON_BOTH_LOCATIONS,
        ]]);

        DB::table($this->tax_areas)->insert([[
            'tax_id' => $yonkers_tax_id,
            'home_governmental_unit_area_id' => $yonkers_gua_id,
            'work_governmental_unit_area_id' => $yonkers_gua_id,
            'based' => TaxArea::BASED_ON_WORK_AND_NOT_HOME_LOCATION,
        ]]);
    }

    /**
     * Reverse the migrations.
     *
     * @return void
     */
    public function down()
    {
        $yonkers_tax_id = DB::table($this->taxes)
            ->where('class', Yonkers::class)
            ->first()
            ->id;

        DB::table($this->tax_areas)->where('tax_id', $yonkers_tax_id)->delete();
        DB::table($this->taxes)->where('name', 'Yonkers Tax')->delete();
        DB::table($this->governmental_unit_areas)->where('name', 'Yonkers, NY')->delete();
    }
};
